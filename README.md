# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/types — типы и интерфейсы

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Важно
В данный момент проект не готов окончательно. Реализованы только базовые типы и интерфейсы

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта

Проект реализован на основе архитектуры MVC с использованием брокера событий. Классы модели взаимодействуют с АПИ и хранят в себе актуальное состояние данных, относящихся к продуктам и заказам. 
Классы представления хранят в себе отображаемую в данный момент информацию, а также предоставляют возможность рендерить отображаемые элементы.

## Описание интерфейсов и типов

В переменной SETTINGS находятся описания всех селекторов css, необходимых для того, чтобы класс отображения отрисовал элемент.

Интерфейс IApiModel описывает класс для взаимодействия модели с АПИ сервиса через класс Api. Интерфейс предоставляет методы:

- getProductList для получения списка доступных товаров
- getProduct для получения конкретного товара
- postOrder для отправки запроса на оформление заказа

Типы productDataApi, ProductListDataApi, ErrorApi и OrderConfirmDataApi описывают типы данных, возвращаемые апи, OrderDataApi- принимаемые

Класс, реализующий интерфейс IProductListModel, отвечает за модель данных списка товаров, хранит в себе список товаров в виде массива ProductData, а также имеет возможность загрузить список товаров через IApiModel (load()), получить один элемент по его id или список всех хранимых элементов(get и getAll)

Класс, реализующий интерфейс IOrderInfoModel, отвечает за модель данных информации о заказе, хранит в себе атрибуты заказа (OrderModelData), и имеет возможность с помощью IApiModel (confirm()) отправить подтверждение заказа на сервер

Класс, реализующий интерфейс IBasketModel, отвечает за модель корзины и хранит в себе в виде массива строк идентификаторы элементов, которые в корзине находятся. Содержит методы add и remove для добавления и удаления продуктов из корзины.

Базовыми интерфейсами представлений являются:
- IView, содержит метож для рендеринга элемента
- IViewConstructor\<D\>, конструктор представления, с передачей в него данных типа D
- IModalView\<D\>, интерфейс, от которого начледуются все классы модальных окон

Классы модальных окон, будут хранить в себе объект разметки, и взаимодействовать с ним посредством методов open(modalData: D) и close(). В этих методах будет происходить наполнение окна соответствующим контентом, привязка событий к брокеру и переключение класса открытости окна.

Интерфейс IListView\<D\> отвечает за отображение списка (в данной работе- список товаров на главной странице или в корзине). Хранит в себе базовый элемент, а также массив представлений хранимых элементов. Для создания дочернего элемента принимает его данные типа D, а также хранит конструктор этого представления. Список может быть инициализирован данными в конструкторе при создании или массивом данных с помощью функции set(). При создании, все необходимые события привязываются к брокеру emitter.

IProductListView и IBasketListView наследуют интерфейс представления списка для типов данных ProductItemData и ProductBasketData соответственно. IBasketListView дополнительно имеет методы для одиночного добавления и удаления элемента по данным.

Тип ListElement<T> описывает отображения элемента списка. Реализация IView позволяет ему рендерить элементы, наследование от T- хранить полезную информацию, а IViewConstructor<T>- позволяет передавать такой элемент спискам в качестве конструктора.
ProductListElement и BasketListElement- интерфейсы для тех же отображений, только уже более специализированные, для типов данных ProductItemData и ProductBasketData соответственно. 